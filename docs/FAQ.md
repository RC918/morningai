# System Architecture of MorningAI

MorningAI is designed as a scalable, multi-tenant SaaS platform aimed at enhancing productivity through autonomous code generation, dynamic FAQ and documentation management, and seamless multi-platform integration. Its architecture is crafted to support real-time task orchestration and efficient vector memory storage. Below is a detailed overview of the system architecture, highlighting its main components and their interconnections.

## Overview

The MorningAI platform leverages a modern technology stack that includes React, Vite, and TailwindCSS for the frontend; Python, Flask, and Gunicorn for the backend; PostgreSQL with Supabase for the database; Redis Queue (RQ) for task queuing; LangGraph for orchestration; OpenAI GPT-4 for AI-driven content generation; and Render.com for deployment with continuous integration/continuous deployment (CI/CD).

### Frontend

- **Technologies**: React + Vite + TailwindCSS
- **Purpose**: Provides the user interface for interaction with MorningAI's features.
- **Path**: `frontend/`
  
```jsx
// Example: App.jsx
import React from 'react';
import { TailwindProvider } from 'tailwindcss-react-native';

const App = () => {
  return (
    <TailwindProvider>
      {/* Your app components */}
    </TailwindProvider>
  );
};
export default App;
```

### Backend

- **Technologies**: Python + Flask + Gunicorn
- **Purpose**: Handles API requests, integrates with external services (like OpenAI), and manages background tasks.
- **Path**: `backend/`

```python
# Example: app.py
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello, World!'

if __name__ == '__main__':
    app.run()
```

### Database

- **Technology**: PostgreSQL (Supabase) with Row Level Security
- **Purpose**: Stores user data, generated content, and operational logs securely.
- **Path**: Configuration found in `supabase/` or managed through the Supabase UI.

### Queue System

- **Technology**: Redis Queue (RQ)
- **Purpose**: Manages asynchronous job queues for long-running tasks.
- **Path**: Jobs and worker configuration can be found in `backend/rq_workers/`

```python
# Example: worker.py
import redis
from rq import Worker, Queue, Connection

listen = ['high', 'default', 'low']

redis_url = 'redis://localhost:6379'

conn = redis.from_url(redis_url)

if __name__ == '__main__':
    with Connection(conn):
        worker = Worker(map(Queue, listen))
        worker.work()
```

### Orchestration

- **Technology**: LangGraph
- **Purpose**: Coordinates complex workflows between different system components.
- **Documentation Link**: [LangGraph Documentation](https://langgraph.io/docs)

### AI Integration

- **Technology**: OpenAI GPT-4
- **Purpose**: Powers the autonomous agent system for code generation and FAQ/documentation management.
  
```python
# Example: ai_integration.py
import openai

openai.api_key = "your-api-key"

response = openai.Completion.create(
  engine="text-davinci-003",
  prompt="What is the system architecture?",
  max_tokens=100
)

print(response.choices[0].text.strip())
```

### Deployment

- **Platform**: Render.com
- **Purpose**: Hosts the application with CI/CD pipelines for automatic deployments from the main branch.

## Related Documentation Links

For further details on each component:
- React Documentation: [https://reactjs.org/docs/getting-started.html](https://reactjs.org/docs/getting-started.html)
- Flask Documentation: [https://flask.palletsprojects.com/en/2.0.x/](https://flask.palletsprojects.com/en/2.0.x/)
- Supabase Documentation: [https://supabase.io/docs](https://supabase.io/docs)
- RQ Documentation: [http://python-rq.org/docs/](http://python-rq.org/docs/)
- OpenAI API Documentation: [https://beta.openai.com/docs/](https://beta.openai.com/docs/)
  
## Common Troubleshooting Tips

1. **Deployment Issues on Render.com**:
   - Ensure environment variables are correctly set up in your Render dashboard.
   - Check the build & deploy logs for specific error messages.

2. **Database Connection Errors**:
   - Verify your Supabase project keys and connection strings are correct.
   - Check if Row Level Security policies are interfering with expected operations.

3. **Task Queues Not Processing**:
   - Ensure Redis server is running and accessible.
   - Check that RQ workers are running; restart them if necessary.

For additional help or to report issues, please refer to our GitHub issues page at `RC918/morningai/issues`.

---
Generated by MorningAI Orchestrator using GPT-4

---

**Metadata**:
- Task: What is the system architecture?
- Trace ID: `b0968d69-8393-4d81-8f7c-11a70c1158fa`
- Generated by: MorningAI Orchestrator using gpt-4-turbo-preview
- Repository: RC918/morningai
