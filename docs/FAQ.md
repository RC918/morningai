# System Architecture of MorningAI

The MorningAI platform is designed as a multi-tenant SaaS (Software as a Service) solution, incorporating a range of technologies to provide a robust and scalable service. This document outlines the key components of the MorningAI system architecture, aiming to assist developers in understanding and utilizing the platform effectively.

## Core Components

### Frontend

- **Technologies**: React, Vite, TailwindCSS
- **Purpose**: Provides the user interface for interacting with the MorningAI platform.
- **Path**: `frontend/`

**Example**:
```javascript
// src/App.jsx
import React from 'react';
import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';
import HomePage from './pages/HomePage';
import 'tailwindcss/tailwind.css';

function App() {
  return (
    <Router>
      <Switch>
        <Route path="/" component={HomePage} />
      </Switch>
    </Router>
  );
}

export default App;
```

### Backend

- **Technologies**: Python, Flask, Gunicorn with multi-worker support
- **Purpose**: Handles API requests, business logic, and data manipulation.
- **Path**: `backend/`

**Example**:
```python
# backend/app.py
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello, World!'

if __name__ == '__main__':
    app.run()
```

### Database

- **Technology**: PostgreSQL (Supabase) with Row Level Security
- **Purpose**: Stores user data, project configurations, and other persistent information.
- **Integration Path**: Supabase integration can be found in the configuration files under `backend/config/`.

### Queue

- **Technology**: Redis Queue (RQ) with worker heartbeat monitoring
- **Purpose**: Manages asynchronous task execution for real-time operations.
- **Implementation Path**: Tasks are defined in `backend/tasks/` and workers in `backend/workers/`.

### Orchestration

- **Technology**: LangGraph for agent workflows
- **Purpose**: Orchestrates complex workflows involving multiple autonomous agents and services.
- **Configuration Path**: Workflow definitions are located in `orchestration/`.

### AI

- **Technology**: OpenAI GPT-4 for content generation
- **Purpose**: Powers intelligent responses and content creation across the platform.
- **Usage Example**:
```python
# Use OpenAI API for generating text
import openai

openai.api_key = 'your-api-key-here'
response = openai.Completion.create(
  engine="text-davinci-003",
  prompt="Generate FAQ content for a SaaS platform",
  temperature=0.7,
  max_tokens=1000,
  top_p=1.0,
  frequency_penalty=0.0,
  presence_penalty=0.0
)
print(response.choices[0].text.strip())
```

### Deployment

- **Service**: Render.com with CI/CD
- **Purpose**: Automates the deployment process, ensuring code changes are smoothly transitioned into production.

## Related Documentation Links

For more detailed information on each component:

1. React Documentation: [https://reactjs.org/docs/getting-started.html](https://reactjs.org/docs/getting-started.html)
2. Flask Documentation: [https://flask.palletsprojects.com/en/2.0.x/](https://flask.palletsprojects.com/en/2.0.x/)
3. PostgreSQL Documentation: [https://www.postgresql.org/docs/](https://www.postgresql.org/docs/)
4. Redis Queue (RQ) Documentation: [https://python-rq.org/docs/](https://python-rq.org/docs/)
5. OpenAI API Documentation: [https://beta.openai.com/documentation/](https://beta.openai.com/documentation/)
6. Render Deployment Guide: [https://render.com/docs](https://render.com/docs)

## Troubleshooting Common Issues

### Frontend Development

**Issue:** Changes not reflecting in UI\
**Solution:** Ensure Vite is running and hot-reload is enabled. If issues persist, try clearing your browser's cache.

### Backend Development

**Issue:** Flask server not starting\
**Solution:** Verify that all required environment variables are set correctly and dependencies installed. Check Flask's debug output for specific errors.

### Database Connectivity

**Issue:** Unable to connect to PostgreSQL database\
**Solution:** Double-check Supabase connection strings and ensure network ACLs/firewalls allow access from your application's IP address.

### Redis Queue Tasks Not Processing

**Issue:** RQ workers not picking up tasks\
**Solution:** Ensure Redis server is running and accessible. Check worker logs for errors or exceptions that could prevent task execution.

By understanding each component of MorningAI's system architecture, developers can more effectively develop, deploy, and troubleshoot applications built on this platform.

---
Generated by MorningAI Orchestrator using GPT-4

---

**Metadata**:
- Task: What is the system architecture?
- Trace ID: `968a377d-0d22-46d6-9990-eb1a15d8b9f6`
- Generated by: MorningAI Orchestrator using gpt-4-turbo-preview
- Repository: RC918/morningai
