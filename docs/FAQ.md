# System Architecture of MorningAI

The system architecture of MorningAI is designed to be robust, scalable, and efficient, supporting multi-tenant SaaS functionalities. It leverages a microservices architecture pattern, ensuring that each component can operate independently while contributing to the overall functionality of the platform. This document aims to provide a comprehensive overview of the system architecture, offering insights into how various technologies and services are integrated.

## Core Components

### Frontend
- **Technology**: React with Vite for bundling and TailwindCSS for styling.
- **Path**: `/frontend`
- **Description**: The frontend is designed as a single-page application (SPA) that interacts with the backend via API calls. It provides the user interface for autonomous agent system management, FAQ generation, documentation management, and multi-platform integration.

### Backend
- **Technology**: Python with Flask serving the application and Gunicorn as the WSGI HTTP Server with multi-worker support for handling concurrent requests.
- **Path**: `/backend`
- **Description**: The backend serves as the backbone of MorningAI, handling API requests, business logic, autonomous agent orchestration, and database operations. It integrates with Redis Queue for real-time task management and pgvector/Supabase for vector memory storage.

### Database
- **Technology**: PostgreSQL hosted on Supabase with Row Level Security (RLS) for tenant isolation.
- **Path**: Configuration can be found under `/backend/config`.
- **Description**: The database stores all persistent data including user accounts, documentation content, and agent configurations. Supabase enhances PostgreSQL with additional features like authentication and real-time subscriptions.

### Queue
- **Technology**: Redis Queue (RQ) for managing background tasks with worker heartbeat monitoring to ensure reliability.
- **Path**: Task definitions and queue configurations are located in `/backend/queue`.
- **Description**: RQ is used for orchestrating long-running or asynchronous tasks such as code generation or batch processing without blocking the main application flow.

### Orchestration
- **Technology**: LangGraph for defining and executing agent workflows.
- **Path**: Workflow definitions can be found in `/backend/orchestration`.
- **Description**: LangGraph allows for the creation of complex workflows that define how autonomous agents interact, including decision-making processes and task execution sequences.

### AI
- **Technology**: OpenAI GPT-4 for content generation.
- **Integration Point**: Integrated within various parts of the backend, primarily in `/backend/services/content_generation`.
- **Description**: GPT-4 powers the intelligent content generation capabilities of MorningAI, enabling it to produce high-quality documentation and FAQ responses.

### Deployment
- **Service**: Render.com with CI/CD pipelines configured for automatic deployments from the main branch.
- **Configuration Path**: CI/CD configuration can usually be found in the root directory as `.render.yaml` or similar.
- **Description**: Render.com hosts both frontend and backend components, providing seamless deployment processes that include review environments, automatic builds, and scalability options.

## Code Example: Enqueueing a Background Task

```python
from rq import Queue
from redis import Redis
from my_module import my_long_running_task

redis_conn = Redis()
q = Queue(connection=redis_conn)
job = q.enqueue(my_long_running_task, 'my_argument')
```

This example demonstrates how to enqueue a background task using Redis Queue (RQ). Replace `my_long_running_task` with your actual task function.

## Related Documentation Links

For more detailed information about each component:
- React Documentation: [https://reactjs.org/docs/getting-started.html](https://reactjs.org/docs/getting-started.html)
- Flask Documentation: [https://flask.palletsprojects.com/en/2.0.x/](https://flask.palletsprojects.com/en/2.0.x/)
- Gunicorn Configuration: [https://docs.gunicorn.org/en/stable/configure.html](https://docs.gunicorn.org/en/stable/configure.html)
- Redis Queue (RQ) Documentation: [http://python-rq.org/docs/](http://python-rq.org/docs/)
- Supabase Documentation: [https://supabase.io/docs](https://supabase.io/docs)
  
## Common Troubleshooting Tips

**Issue:** Background tasks not executing.
**Solution:** Ensure Redis server is running and accessible. Check worker logs for errors or missed heartbeats.

**Issue:** Database connection errors.
**Solution:** Verify database credentials in `/backend/config`. Ensure network access is allowed from your application server to Supabase.

**Issue:** Frontend not updating after backend changes.
**Solution:** Confirm that your build process incorporates changes properly. If using hot module replacement (HMR), ensure it's configured correctly in Vite.

---
Generated by MorningAI Orchestrator using GPT-4

---

**Metadata**:
- Task: What is the system architecture?
- Trace ID: `77b8a736-67c0-40a0-a67f-e1b40f3dabe8`
- Generated by: MorningAI Orchestrator using gpt-4-turbo-preview
- Repository: RC918/morningai
