# System Architecture of MorningAI

MorningAI leverages a robust and scalable system architecture designed to facilitate efficient code generation, documentation management, and integration across multiple platforms. This architecture is built upon a modern technology stack, utilizing best practices for asynchronous task handling, database management, and AI-driven content generation.

## Core Components

### Frontend
- **Technology**: React with Vite and TailwindCSS for a responsive and modern UI.
- **Path**: The frontend codebase is located under `/frontend` in the RC918/morningai repository.
- **Functionality**: Handles user interactions, sends requests to the backend, and displays responses from the server.

```jsx
// Example: Frontend request to backend
fetch('/api/generate-code', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({language: 'Python', task: 'Sort array'}),
}).then(response => response.json())
  .then(data => console.log(data));
```

### Backend
- **Technology**: Python with Flask and Gunicorn (with multi-worker support for scalability).
- **Path**: Backend code is found under `/backend` in the repository.
- **Functionality**: Processes requests from the frontend, interacts with the database, manages tasks in the Redis Queue, and handles autonomous agent system operations.

```python
# Example: Flask route for code generation
from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/api/generate-code', methods=['POST'])
def generate_code():
    data = request.json
    # Code generation logic here
    return jsonify({"code": "Generated code here"})

if __name__ == "__main__":
    app.run(debug=True)
```

### Database
- **Technology**: PostgreSQL with Row Level Security via Supabase for secure data access.
- **Functionality**: Stores user data, generated codes, documentation entries, and other persistent information.

```sql
-- Example: SQL query for fetching user-generated codes
SELECT * FROM generated_codes WHERE user_id = 'user123';
```

### Queue System
- **Technology**: Redis Queue (RQ) with worker heartbeat monitoring for real-time task orchestration.
- **Path/Usage**: Task queuing and management are crucial for processing background jobs initiated by user actions or scheduled events.

```python
# Example: Enqueueing a background job in RQ
from redis import Redis
from rq import Queue

q = Queue(connection=Redis())

result = q.enqueue('path.to.my.function', arg1, arg2)
```

### AI Content Generation
- **Technology**: OpenAI GPT-4 for generating FAQ content and assisting in code generation.
- **Functionality**: Provides intelligent responses to queries and assists in generating documentation or code snippets based on user input.

### Deployment & Orchestration
- **Platform**: Render.com with continuous integration and delivery (CI/CD) to ensure seamless updates.
- **Orchestration Tool**: LangGraph is used for defining agent workflows within the platform.

## Related Documentation Links

For more detailed information on each component:
- [React Documentation](https://reactjs.org/docs/getting-started.html)
- [Flask Documentation](https://flask.palletsprojects.com/en/2.0.x/)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [Redis Queue (RQ) Documentation](http://python-rq.org/docs/)
- [OpenAI API Documentation](https://beta.openai.com/docs/)

## Common Troubleshooting Tips

### Frontend Issues
- Ensure all dependencies are up-to-date with `npm install`.
- Check browser console for errors related to API calls or state management.

### Backend & API Issues
- Verify that Gunicorn is running with the correct number of workers (`gunicorn -w 4 app:app`).
- Check Flask routes for correct HTTP method usage (`GET` vs. `POST`).

### Database Connection Problems
- Confirm that Supabase environment variables are correctly set in your `.env` file.
- Use Supabase Dashboard to monitor query performance and access patterns.

### Task Queuing Delays or Failures
- Monitor Redis Queue dashboard for failed jobs.
- Ensure Redis server is running and accessible by the backend service.

By understanding MorningAI's system architecture, developers can more effectively navigate the project repository, integrate new features, troubleshoot issues, and contribute to the platform's growth.

---
Generated by MorningAI Orchestrator using GPT-4

---

**Metadata**:
- Task: What is the system architecture?
- Trace ID: `27cadd5e-48e4-4bf9-8f5a-bc21f4458bd5`
- Generated by: MorningAI Orchestrator using gpt-4-turbo-preview
- Repository: RC918/morningai
