# System Architecture of MorningAI

The system architecture of MorningAI is designed to be robust, scalable, and capable of handling complex workflows for code generation, documentation management, and real-time task orchestration. Below is a detailed overview of each component in the MorningAI platform, how they interact, and some insights into their configuration and operation.

## Overview

MorningAI leverages a modern stack that includes React, Vite, and TailwindCSS for the frontend; Python, Flask, Gunicorn with multi-worker support for the backend; PostgreSQL (via Supabase) with Row Level Security for the database; Redis Queue (RQ) for task queuing; LangGraph for agent workflows orchestration; OpenAI GPT-4 for AI-powered content generation; and Render.com for deployment with CI/CD capabilities.

### Frontend

The frontend is built using React, utilizing Vite as the build tool and TailwindCSS for styling. This setup allows for fast development cycles and a highly customizable UI design.

- **Location in Repository**: `/frontend`
- **Key Configuration**:
  - `vite.config.js` for Vite settings
  - `tailwind.config.js` for TailwindCSS customization

### Backend

Our backend is powered by Python with Flask serving as the web framework and Gunicorn as the WSGI HTTP Server with multi-worker support to handle concurrent requests efficiently.

- **Location in Repository**: `/backend`
- **Flask Application Setup**:
  ```python
  from flask import Flask
  app = Flask(__name__)
  ```
- **Gunicorn Configuration**:
  ```bash
  gunicorn --workers=3 myapp:app
  ```

### Database

We utilize PostgreSQL through Supabase with Row Level Security (RLS) enabled to ensure data integrity and security. RLS policies are defined directly in the database to automatically enforce access controls at the row level.

- **Supabase Project Setup**:
  Access your Supabase project dashboard to configure tables, RLS policies, and retrieve API keys.

### Task Queuing

Redis Queue (RQ) is used for managing background tasks. It allows us to offload tasks that are resource-intensive or time-consuming, ensuring that our web application remains responsive.

- **Worker Setup**:
  ```python
  from rq import Worker, Queue, Connection
  import redis
  
  redis_url = 'redis://localhost:6379'
  redis_conn = redis.from_url(redis_url)
  
  if __name__ == '__main__':
      with Connection(redis_conn):
          worker = Worker(['default'], connection=redis_conn)
          worker.work()
  ```

### Orchestration

LangGraph orchestrates agent workflows. It enables the autonomous agent system within MorningAI to execute complex sequences of tasks based on predefined rules or dynamic conditions.

### AI Content Generation

OpenAI's GPT-4 powers our content generation features. It's integrated into various parts of MorningAI to offer advanced code generation capabilities and automated FAQ generation.

### Deployment

The entire platform is deployed on Render.com, benefiting from its seamless CI/CD pipelines that automatically build and deploy our application upon every commit to our repository.

### Troubleshooting Tips

- **Frontend Issues**: Ensure all npm packages are correctly installed (`npm install`) and check browser console logs for errors.
- **Backend Problems**: Verify that all environment variables are set correctly, especially those related to database connections and third-party services.
- **Database Connectivity**: Make sure that your Supabase project's API keys are up-to-date and that RLS policies do not inadvertently block access.
- **Task Queue Delays**: Investigate Redis server health and worker logs if tasks are not being processed as expected.
- **Deployment Failures**: Check Render.com deployment logs for details on build or deployment errors.

For more detailed documentation on each component, please refer to the specific sections in our repository located at `RC918/morningai/docs`.

---
Generated by MorningAI Orchestrator using GPT-4

---

**Metadata**:
- Task: What is the system architecture?
- Trace ID: `05857048-172f-48c1-be99-c8cad956cfb4`
- Generated by: MorningAI Orchestrator using gpt-4-turbo-preview
- Repository: RC918/morningai
