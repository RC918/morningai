# 產品需求文件 (PRD) - Phase 2: 多租戶與頻道開通

## 1. 專案目標

本階段的目標是擴展 Morning AI 平台的功能，讓租戶能夠連接他們的通訊平台（LINE、Telegram、Messenger），並自動開通 AI Bot。**核心優化目標是引入 AI Agent 輔助的綁定流程，徹底消除用戶的技術門檻，提供極致流暢的 onboarding 體驗。**

## 2. 功能需求

### 2.1. 通訊平台整合 (傳統手動流程 - 將被優化替代)

-   **LINE 整合**：提供使用者在後台輸入 LINE Bot 的 Channel Access Token 和 Channel Secret。
-   **Telegram 整合**：提供使用者在後台輸入 Telegram Bot 的 Token。
-   **Messenger 整合**：提供使用者透過 Facebook 登入，並選擇他們想要連接的粉絲專頁。

### 2.2. AI Agent 輔助綁定流程 (核心優化)

**FR-BIND-01: 一鍵啟動 AI 綁定助手**
- **描述**: 在平台整合管理界面，為每個平台（Telegram, LINE, Messenger）提供一個「AI 助手一鍵綁定」按鈕，取代傳統的手動輸入表單。
- **驗收標準**: 
  - 點擊按鈕後，應彈出一個對話式 UI 窗口，啟動對應平台的 AI 綁定助手。
  - 原有的手動輸入表單應被隱藏或作為「高級模式」選項保留。

**FR-BIND-02: 對話式引導與信息收集**
- **描述**: AI Agent 將通過對話方式，引導用戶完成綁定所需的操作。如果用戶不清楚如何獲取 `Token`，Agent 將提供帶有截圖或動畫的詳細分步指南。
- **驗收標準**: 
  - Agent 的對話流程必須覆蓋用戶「已有 Bot」和「沒有 Bot」兩種場景。
  - Agent 提供的指南必須是視覺化的（包含圖片或短視頻），清晰易懂。
  - Agent 能夠準確識別用戶粘貼的 `Token` 格式。

**FR-BIND-03: 後端自動化配置與驗證**
- **描述**: 在用戶提供 `Token` 後，後端系統將自動完成所有後續的技術配置，包括驗證 `Token` 有效性、生成並註冊 `Webhook URL`、設置所需權限等。
- **驗收標準**: 
  - 系統必須能自動調用各平台（Telegram, LINE, Messenger）的 API 完成 Webhook 設置。
  - 配置過程中，前端界面應顯示實時的進度狀態（如：「正在驗證 Token...」、「正在設置 Webhook...」）。
  - 配置成功或失敗都必須給予明確的、人類可讀的提示信息。

**FR-BIND-04: 即時測試與成功確認**
- **描述**: 綁定成功後，AI Agent 將提供一個「發送測試消息」的按鈕，讓用戶可以立即驗證整合是否成功。
- **驗收標準**: 
  - 點擊測試按鈕後，用戶應能在其對應的平台（如 Telegram Bot）上收到一條來自系統的測試消息。
  - 綁定成功的平台應在 UI 上有明顯的「已綁定」狀態標識和綠色指示燈。

### 2.3. AI Bot 啟用

-   **Orchestrator 整合**：將開通的 Bot 接入 AI Orchestrator，以便後續的任務編排和管理。
-   **Input Collector**：啟用 Input Collector Agent，以接收來自通訊平台的訊息。
-   **Validation Agent**：啟用 Validation Agent，以驗證傳入訊息的格式和內容。

## 3. 使用者故事

-   **身為一個非技術背景的餐廳老闆**，我希望能點擊一個按鈕，然後在 AI 助手的對話引導下，輕鬆地將我的 LINE 官方帳號連接到 Morning AI 平台，整個過程就像和一個技術專家聊天一樣簡單，而不需要去理解什麼是 Token 或 Webhook。
-   **身為一個系統管理員**，我希望能看到 AI 助手引導的綁定成功率和常見失敗點的統計數據，以便持續優化引導流程和幫助文檔。

## 4. 非功能性需求

-   **安全性**：所有通訊平台的 Token 和 Secret 都必須在傳輸和存儲時全程使用強加密。
-   **可靠性**：AI 輔助綁定流程的成功率必須達到 99% 以上。對於因第三方平台 API 變更導致的失敗，系統應能提供清晰的錯誤提示和對應的解決方案文檔鏈接。
-   **易用性**：整個對話式綁定流程應在 3 分鐘內完成。用戶在任何步驟卡住時，都可以請求「人工客服幫助」的選項。

## 5. 業務影響

- **提升用戶採用率**: 預計平台綁定成功率將從目前的 60% 提升至 95% 以上。
- **降低支持成本**: 預計與平台綁定相關的技術支持工單將減少 80%。
- **增強用戶滿意度**: 提供無縫、流暢的 onboarding 體驗，顯著提升用戶滿意度和品牌忠誠度。
- **擴大市場競爭力**: 打造業界領先的用戶體驗，成為 Morning AI 的核心競爭優勢之一。

