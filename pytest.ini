[pytest]
# Pytest configuration for monorepo root
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Python path configuration
# Add all subproject directories to Python path for module resolution
pythonpath = 
    .
    agents/faq_agent
    agents/ops_agent
    agents/dev_agent
    handoff/20250928/40_App/api-backend/src
    handoff/20250928/40_App/orchestrator
    handoff/20250928/99_Original_Bundle
    orchestrator

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Exclude problematic test directories that should be run in their own context
norecursedirs = 
    .git
    .venv
    node_modules
    dist
    build
    __pycache__
    .pytest_cache
    .turbo
    # Exclude handoff legacy code tests (require specific setup)
    handoff/20250928/60_Design/testing
    handoff/20250928/99_Original_Bundle/greenlet/tests
    handoff/20250928/99_Original_Bundle/morningai_enhanced/tests
    handoff/20250928/99_Original_Bundle/tests
    # Exclude agent tests that require local module imports (run in their own directories)
    agents/faq_agent/smoke_test.py
    agents/faq_agent/test_real_integration.py
    agents/faq_agent/tests
    agents/ops_agent/test_new_vercel_token.py
    agents/ops_agent/tests
    examples/e2e_full_integration_test.py
    # Exclude handoff app tests (require specific setup in their directories)
    handoff/20250928/40_App/api-backend/tests
    handoff/20250928/40_App/orchestrator/tests

# Markers for test categorization
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    e2e: marks tests as end-to-end tests
    benchmark: marks tests as benchmark tests

# Output options
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --ignore=agents/faq_agent/smoke_test.py
    --ignore=agents/faq_agent/test_real_integration.py
    --ignore=agents/ops_agent/test_new_vercel_token.py
    --ignore=examples/e2e_full_integration_test.py

# Coverage options (if pytest-cov is installed)
# Uncomment to enable coverage reporting
# addopts = --cov=. --cov-report=term-missing

