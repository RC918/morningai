version: '1.0'
description: 'Morning AI Phase 11 Complete Environment Schema'
metadata:
  total_variables: 53
  required_variables: 19
  optional_variables: 34
  last_updated: '2025-10-13'

fields:
  
  JWT_SECRET_KEY:
    type: secret
    required: true
    min_length: 32
    description: JWT token signing key for authentication
    category: Authentication
    security_level: critical
    
  ADMIN_PASSWORD:
    type: secret
    required: true
    description: Admin user password for system access
    category: Authentication
    security_level: critical
    
  SECRET_KEY:
    type: secret
    required: true
    min_length: 32
    description: Application secret key for Flask sessions
    category: Security
    security_level: critical
    
  MASTER_KEY:
    type: secret
    required: false
    description: Master encryption key for sensitive data
    category: Security
    security_level: critical

  
  DATABASE_URL:
    type: url
    required: true
    description: PostgreSQL database connection URL
    category: Database
    security_level: secret
    example: postgresql://user:pass@host:5432/dbname
    
  REDIS_URL:
    type: url
    required: false
    default: redis://localhost:6379/0
    description: Redis connection URL for queue and caching. Use rediss:// (double 's') for TLS-encrypted connections. For production, use UPSTASH_REDIS_REST_URL (HTTPS/TLS by default)
    category: Database
    security_level: secret
    example: redis://localhost:6379/0
    example_tls: rediss://user:pass@host:6380/0
    notes: |
      - Non-TLS: redis://localhost:6379/0
      - TLS: rediss://user:pass@host:6380/0
      - Recommendation: Use UPSTASH_REDIS_REST_URL for production (HTTPS/TLS by default)
    
  MEMORY_TABLE:
    type: string
    required: false
    default: memory
    description: Supabase memory table name for vector storage
    category: Database
    security_level: public

  
  SUPABASE_URL:
    type: url
    required: true
    description: Supabase project URL
    category: Cloud Services
    security_level: public
    example: https://xxxxx.supabase.co
    
  SUPABASE_ANON_KEY:
    type: secret
    required: true
    description: Supabase anonymous/public key
    category: Cloud Services
    security_level: secret
    
  SUPABASE_SERVICE_ROLE_KEY:
    type: secret
    required: true
    description: Supabase service role key (admin access)
    category: Cloud Services
    security_level: critical

  
  CLOUDFLARE_API_TOKEN:
    type: secret
    required: true
    description: Cloudflare API token for DNS/CDN management
    category: Cloud Services
    security_level: secret
    
  CLOUDFLARE_ZONE_ID:
    type: string
    required: true
    description: Cloudflare zone ID for domain
    category: Cloud Services
    security_level: public

  
  VERCEL_TOKEN:
    type: secret
    required: true
    description: Vercel deployment token
    category: Cloud Services
    security_level: secret
    
  VERCEL_ORG_ID:
    type: string
    required: true
    description: Vercel organization ID
    category: Cloud Services
    security_level: public
    
  VERCEL_PROJECT_ID:
    type: string
    required: true
    description: Vercel project ID
    category: Cloud Services
    security_level: public

  
  RENDER_API_KEY:
    type: secret
    required: true
    description: Render API key for deployments
    category: Cloud Services
    security_level: secret
    
  RENDER_INSTANCE_ID:
    type: string
    required: false
    description: Render instance ID (auto-set by Render platform)
    category: Infrastructure
    security_level: public

  
  UPSTASH_REDIS_REST_URL:
    type: url
    required: true
    description: Upstash Redis REST API URL (HTTPS/TLS enabled by default)
    category: Cloud Services
    security_level: public
    example: https://xxxxx.upstash.io
    notes: Recommended for production - HTTPS/TLS enabled by default
    
  UPSTASH_REDIS_REST_TOKEN:
    type: secret
    required: true
    description: Upstash Redis REST API token (HTTPS/TLS enabled by default)
    category: Cloud Services
    security_level: secret
    notes: Required when using UPSTASH_REDIS_REST_URL

  
  FLY_API_TOKEN:
    type: secret
    required: false
    description: Fly.io API token for sandbox deployments
    category: Infrastructure
    security_level: secret

  
  SENTRY_DSN:
    type: url
    required: true
    description: Sentry DSN for error tracking
    category: Monitoring
    security_level: public
    example: https://xxxxx@xxxxx.ingest.sentry.io/xxxxx
    
  SENTRY_AUTH_TOKEN:
    type: secret
    required: false
    description: Sentry authentication token for API access
    category: Monitoring
    security_level: secret

  
  GITHUB_TOKEN:
    type: secret
    required: true
    description: GitHub API token for repository operations (permissions repo, workflow)
    category: Integration
    security_level: critical
    
  GITHUB_REPO:
    type: string
    required: true
    default: RC918/morningai
    description: GitHub repository in owner/repo format
    category: Integration
    security_level: public
    example: RC918/morningai

  
  OPENAI_API_KEY:
    type: secret
    required: true
    description: OpenAI API key for embeddings and LLM operations
    category: Integration
    security_level: critical

  
  SLACK_WEBHOOK_URL:
    type: url
    required: false
    description: Slack webhook URL for notifications
    category: Integration
    security_level: secret
    
  TELEGRAM_BOT_TOKEN:
    type: secret
    required: false
    description: Telegram bot token for HITL approvals
    category: Integration
    security_level: secret
    
  TELEGRAM_ADMIN_CHAT_ID:
    type: string
    required: false
    description: Telegram admin chat ID for notifications
    category: Integration
    security_level: public

  
  MCP_SERVER_URL:
    type: url
    required: false
    description: MCP (Model Context Protocol) server endpoint
    category: Integration
    security_level: public
    
  AGENT_ID:
    type: string
    required: false
    description: Agent identifier for MCP operations
    category: Integration
    security_level: public

  
  RQ_QUEUE_NAME:
    type: string
    required: false
    default: orchestrator
    description: Redis Queue name for task processing
    category: Worker
    security_level: public
    
  RQ_SERIALIZER:
    type: string
    required: false
    default: json
    description: RQ serializer type (json/pickle)
    category: Worker
    security_level: public
    choices: [json, pickle]

  
  FLASK_ENV:
    type: string
    required: false
    default: development
    choices: [development, staging, production]
    description: Flask environment mode
    category: Application
    security_level: public
    
  ENVIRONMENT:
    type: string
    required: false
    default: production
    description: Deployment environment (development/staging/production)
    category: Application
    security_level: public
    choices: [development, staging, production]
    
  PORT:
    type: integer
    required: false
    default: 5000
    description: Application server port
    category: Application
    security_level: public
    
  CORS_ORIGINS:
    type: string
    required: false
    default: http://localhost:5173,http://localhost:5174
    description: CORS allowed origins (comma-separated)
    category: Application
    security_level: public
    example: http://localhost:5173,http://localhost:5174
    
  APP_VERSION:
    type: string
    required: false
    default: 9.0.0
    description: Application version for tracking
    category: Application
    security_level: public
    
  APP_PHASE:
    type: string
    required: false
    default: Phase 8
    description: Current application phase
    category: Application
    security_level: public
    
  HOSTNAME:
    type: string
    required: false
    description: System hostname (auto-detected)
    category: Infrastructure
    security_level: public

  
  PHASE7_ENABLED:
    type: boolean
    required: false
    default: true
    description: Enable Phase 7 components
    category: Feature Flags
    security_level: public
    
  OPS_AGENT_ENABLED:
    type: boolean
    required: false
    default: true
    description: Enable Ops Agent functionality
    category: Feature Flags
    security_level: public
    
  GROWTH_STRATEGIST_ENABLED:
    type: boolean
    required: false
    default: true
    description: Enable Growth Strategist agent
    category: Feature Flags
    security_level: public
    
  PM_AGENT_ENABLED:
    type: boolean
    required: false
    default: true
    description: Enable PM Agent functionality
    category: Feature Flags
    security_level: public
    
  HITL_APPROVAL_ENABLED:
    type: boolean
    required: false
    default: true
    description: Enable HITL (Human-in-the-Loop) approval system
    category: Feature Flags
    security_level: public
    
  DEMO_MODE:
    type: boolean
    required: false
    default: false
    description: Enable demo mode (limited functionality)
    category: Feature Flags
    security_level: public
    
  SANDBOX_ENABLED:
    type: boolean
    required: false
    default: false
    description: Enable Docker sandbox containers for agents
    category: Feature Flags
    security_level: public

  
  VITE_API_BASE_URL:
    type: url
    required: false
    default: http://localhost:5001
    description: Frontend API base URL
    category: Frontend
    security_level: public
    example: http://localhost:5001
    
  VITE_FEATURES:
    type: string
    required: false
    default: dashboard,checkout,settings
    description: Enabled frontend features (comma-separated)
    category: Frontend
    security_level: public
    example: dashboard,checkout,settings
    
  VITE_SENTRY_DSN:
    type: url
    required: false
    description: Frontend Sentry DSN for error tracking
    category: Frontend
    security_level: public
    
  VITE_USE_MOCK:
    type: boolean
    required: false
    default: false
    description: Use mock API in frontend for development
    category: Frontend
    security_level: public

  
  STRIPE_SECRET_KEY:
    type: secret
    required: false
    description: Stripe secret key (planned for Phase 10)
    category: Payment
    security_level: critical
    
  STRIPE_WEBHOOK_SECRET:
    type: secret
    required: false
    description: Stripe webhook secret (planned for Phase 10)
    category: Payment
    security_level: critical

  
  TEST_ADMIN_JWT:
    type: secret
    required: false
    description: JWT token for E2E tests
    category: Testing
    security_level: secret
